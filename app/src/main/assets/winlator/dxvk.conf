# DXVK Configuration for SteamDeck Mobile
# Research-based optimizations for Android (2025)
# Source: https://github.com/doitsujin/dxvk/wiki/Configuration

# ============================================================
# Performance Optimizations
# ============================================================

# Allow memory overcommit (important for low-memory mobile devices)
dxvk.allowMemoryOvercommit = True

# Enable descriptor buffers (AMD/NVIDIA, requires VK_EXT_descriptor_buffer)
# Significantly reduces CPU overhead
# Supported: Mesa 25.1+, NVIDIA 575.51.02+
dxvk.enableDescriptorBuffer = True

# Pipeline lifetime management (saves memory)
dxvk.enableGraphicsPipelineLibrary = True

# ============================================================
# Direct3D 9 Optimizations
# ============================================================

# Disable cached dynamic buffers (only enable for buggy apps)
# Reduces GPU performance when enabled
d3d9.cachedDynamicBuffers = False

# ============================================================
# Direct3D 11 Optimizations
# ============================================================

# Disable constant buffer range checking (performance boost)
d3d11.constantBufferRangeCheck = False

# Reduce synchronization overhead
d3d11.relaxedBarriers = True

# Enable D3D11.1 features
d3d11.maxFeatureLevel = 12_1

# ============================================================
# Memory Management (Mobile-Optimized)
# ============================================================

# Max memory chunk size in MB (default 128, reduced for mobile)
# Lower value = less memory fragmentation on Android
dxvk.maxChunkSize = 64

# Max single allocation in MB
dxvk.maxMemoryAllocationSize = 256

# ============================================================
# Shader Optimizations
# ============================================================

# Use raw SSBOs for performance
dxvk.useRawSsbo = True

# ============================================================
# VSync and Frame Pacing
# ============================================================

# VSync interval (0 = off, may reduce latency)
# Set to 1 for capped 60fps, 0 for unlimited
dxvk.presentInterval = 0

# ============================================================
# Logging (Reduce Overhead)
# ============================================================

# Disable DXVK logging in production
# Set via environment variable: DXVK_LOG_LEVEL=warn

# ============================================================
# Experimental Features
# ============================================================

# DXVK Async shader compilation (unofficial patch)
# Reduces stutter but may cause rendering issues
# Enable via environment variable: DXVK_ASYNC=1

# ============================================================
# Game-Specific Workarounds (Add as needed)
# ============================================================

# Example: Disable specific features for compatibility
# dxvk.enableGraphicsPipelineLibrary = False  # For game X
# d3d11.constantBufferRangeCheck = True       # For game Y
